<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Concordia International</title>
  <meta name="description" content="Club website with schedule, contact, and videos." />
  <meta name="theme-color" content="#ef4444" />
  <meta property="og:title" content="CI Club" />
  <meta property="og:description" content="Schedule, contact, and videos." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="og.png" />

  <link rel="icon" type="image/png" sizes="32x32" href="images/logo.png" />
  <link rel="apple-touch-icon" href="images/logo.png" />
  <link rel="preconnect" href="https://www.youtube.com" crossorigin>

  <style>
    :root{
      --bg:#0c0b0c; --surface:#141014; --text:#f3eef0; --muted:#c9b9be;
      --brand:#ef4444; --brand-2:#f87171; --ring:rgba(239,68,68,.5);
      --border:rgba(255,255,255,.1); --shadow:0 10px 24px rgba(0,0,0,.28);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      line-height:1.6;color:var(--text);
      background:
        radial-gradient(1000px 700px at 10% -10%, rgba(239,68,68,.10), transparent 60%),
        radial-gradient(800px 600px at 110% 0%, rgba(248,113,113,.08), transparent 60%),
        var(--bg);
    }
    img{max-width:100%;display:block}
    a{color:var(--brand-2);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1000px;margin:0 auto;padding:0 20px}

    header.site{position:sticky;top:0;z-index:30;background:rgba(20,16,20,.72);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px;font-weight:700}
    .brand img{height:36px;width:auto;border-radius:8px;box-shadow:0 0 0 3px rgba(239,68,68,.12)}
    .brand-name{letter-spacing:.2px}
    .nav-links{display:flex;gap:18px}
    .nav-links a{color:var(--text);opacity:.92}

    .hero{padding:56px 0 24px;text-align:center}
    .hero h1{font-size:clamp(28px,4vw,40px);margin:0 0 8px}
    .hero p{color:var(--muted);margin:0 auto 18px;max-width:720px}
    .cta{display:inline-flex;gap:12px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:var(--brand);color:#2a0c0c;font-weight:700;box-shadow:var(--shadow)}
    .btn.ghost{background:transparent;color:var(--text)}

    section{padding:28px 0}
    h2{font-size:20px;margin:0 0 10px}
    .card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:var(--shadow)}
    .grid{display:grid;gap:16px}
    .embed{aspect-ratio:16/9;width:100%;border:0;border-radius:12px;overflow:hidden}

    table{width:100%;border-collapse:collapse}
    th,td{text-align:left;padding:10px 12px}
    thead th{background:#161116;position:sticky;top:60px;border-bottom:1px solid var(--border)}
    tbody tr{border-bottom:1px solid var(--border)}

    footer{color:var(--muted);padding:36px 0 56px;text-align:center}
    @media (max-width:840px){ thead th{top:58px} }
    :focus-visible{outline:2px solid var(--ring);outline-offset:2px;border-radius:10px}
  </style>

  <script defer>
    // ===== CONFIG — edit only this object =====
    const CONFIG = {
      clubName: "CONCORDIA INTERNATIONAL WEIGHTLIFTING CLUB",
      channelId: "UC3EnVXpZZ2f3pTmMMZJzWLg",   // YouTube channel id (UC…)
      playlistId: "",                         // optional: custom playlist id (PL…)
      featuredVideoId: "",                    // optional: single video id
      links: {
        email: "ciwc2001@gmail.com",
        instagram: "https://www.instagram.com/concordiaweightlifting/",
        address: "5400 Av de Westbury, Montréal, QC H3W 2Y8",
        contactForm: "inquiry/"              // relative path
      },
      schedule: [
        { day: "Monday",    time: "4:00 PM–8:00 PM",  location: "YMHA Gym" },
        { day: "Wednesday", time: "4:00 PM–8:00 PM",  location: "YMHA Gym" },
        { day: "Thursday",  time: "4:00 PM–8:00 PM",  location: "YMHA Gym" },
        { day: "Saturday",  time: "9:00 AM–12:00 PM", location: "YMHA Gym" },
      ]
    };

    // Small safe helpers
    const $  = (s, root=document) => root.querySelector(s);
    const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));
    const safeText = (el, value) => { if (el && value != null) el.textContent = String(value); };
    const safeHref = (el, href) => { if (el && href) el.setAttribute('href', href); };

    document.addEventListener('DOMContentLoaded', () => {
      // Club name in header/hero/footer
      $$('.brand-name,[data-club-name]').forEach(el => safeText(el, CONFIG.clubName));

      // Logo fallback
      const logo = $('#club-logo');
      if (logo) {
        logo.onerror = () => { logo.style.display = 'none'; };
      }

      // YouTube channel link targets
      const channelUrl = CONFIG.channelId ? `https://www.youtube.com/channel/${CONFIG.channelId}` : '#';
      $$('[data-channel-link]').forEach(a => {
        safeHref(a, channelUrl);
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
      });

      // Schedule table
      const tbody = $('#schedule-body');
      if (tbody) {
        tbody.innerHTML = CONFIG.schedule
          .map(r => `<tr><td>${escapeHtml(r.day)}</td><td>${escapeHtml(r.time)}</td><td>${escapeHtml(r.location)}</td></tr>`)
          .join('');
      }

      // Contact info (safe + won’t crash if elements missing)
      const emailEl = $('#email-link');
      if (emailEl && CONFIG.links.email) {
        safeHref(emailEl, `mailto:${CONFIG.links.email}`);
        safeText(emailEl, CONFIG.links.email);
      }

      const instaEl = $('#insta-link');
      if (instaEl) safeHref(instaEl, CONFIG.links.instagram);

      const addressEl = $('#address-text');
      safeText(addressEl, CONFIG.links.address);

      const formEl = $('#form-link');
      if (formEl) safeHref(formEl, CONFIG.links.contactForm);

      // Featured video (simple iframe, safe)
      const featured = $('#featured');
      if (featured) {
        if (CONFIG.featuredVideoId) {
          featured.innerHTML = `
            <div class="card">
              <h3 style="margin:0 0 10px;">Featured Video</h3>
              <iframe
                class="embed"
                loading="lazy"
                allow="autoplay; encrypted-media; picture-in-picture"
                allowfullscreen
                src="https://www.youtube.com/embed/${encodeURIComponent(CONFIG.featuredVideoId)}?rel=0&modestbranding=1&playsinline=1">
              </iframe>
            </div>`;
        } else {
          featured.remove();
        }
      }

      // Latest videos playlist (NO IFrame API — most reliable on GitHub Pages)
      const uploadsOrPlaylist = getPlaylistIdFromConfig(CONFIG);
      mountYouTubePlaylistEmbed(uploadsOrPlaylist);

      // Footer year
      const yearEl = $('#year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
    });

    // ===== YouTube (safe, no JS API) =====
    function getPlaylistIdFromConfig(cfg) {
      // If user provided a custom playlist (PL...), use it.
      if (cfg.playlistId && cfg.playlistId.length) return cfg.playlistId;

      // Otherwise, use "uploads" playlist derived from channel ID:
      // UCxxxx -> UUxxxx (YouTube convention)
      if (cfg.channelId && cfg.channelId.startsWith('UC')) {
        return 'UU' + cfg.channelId.slice(2);
      }
      return '';
    }

    function mountYouTubePlaylistEmbed(playlistId) {
      const iframe = document.getElementById('playlist-player');
      if (!iframe || !playlistId) return;

      const params = new URLSearchParams({
        list: playlistId,
        rel: "0",
        modestbranding: "1",
        playsinline: "1"
        // autoplay: "1",  // optional (often blocked)
        // mute: "1"       // optional
      });

      iframe.src = `https://www.youtube.com/embed/videoseries?${params.toString()}`;
    }


    // Minimal HTML escaping for schedule rows (defensive)
    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, (m) => ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
      }[m]));
    }
  </script>
</head>

<body>
  <header class="site">
    <div class="container nav">
      <a class="brand" href="./" aria-label="Home">
        <img id="club-logo" src="images/logo.png" alt="Club logo" />
        <span class="brand-name">Concordia International</span>
      </a>
      <nav class="nav-links">
        <a href="./">Home</a>
        <a href="inquiry/">Inquiry</a>
        <a data-channel-link href="#">YouTube ↗</a>
      </nav>
    </div>
  </header>

  <section class="hero container">
    <h1><span data-club-name>Concordia International</span></h1>
    <p>Check out our latest videos, training schedule, and contact info!</p>
    <div class="cta">
      <a class="btn" data-channel-link href="#">Visit YouTube</a>
      <a class="btn ghost" href="inquiry/">Contact / Inquiry</a>
    </div>
  </section>

  <main class="container">
    <section id="featured"></section>

    <section id="videos">
      <h2>Latest Videos</h2>

      <!-- Plain iframe embed: reliable + avoids origin/postMessage issues -->
      <iframe
        id="playlist-player"
        class="embed"
        loading="lazy"
        allow="autoplay; encrypted-media; picture-in-picture"
        allowfullscreen
        src="">
      </iframe>

      <noscript><div class="card">Enable JavaScript to see the video playlist.</div></noscript>
    </section>

    <section id="schedule">
      <h2>Training Schedule</h2>
      <div class="card">
        <table>
          <thead><tr><th>Day</th><th>Time</th><th>Location</th></tr></thead>
          <tbody id="schedule-body"></tbody>
        </table>
      </div>
    </section>

    <section id="about">
      <h2>About the Club</h2>
      <div class="card">
        <p>We are a community club focused on Olympic weightlifting. Founded in 2002 by John Margolis, we have trained many athletes of all ages and backgrounds. Everyone is welcome—from beginners to national competitors. Drop in for a trial session or to chat with our athletes!</p>
      </div>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr))">
        <div class="card">
          <p><strong>Email:</strong> <a id="email-link" href="mailto:">Email</a></p>
          <p><strong>Instagram:</strong> <a id="insta-link" href="#" target="_blank" rel="noopener">@concordiaweightlifting</a></p>
          <p><strong>Address:</strong> <span id="address-text"></span></p>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;">Inquiry Form</h3>
          <p><a id="form-link" href="inquiry/">Sign-up / Inquiry Form ↗</a></p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>© <span id="year"></span> <span data-club-name>Concordia International</span>. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
